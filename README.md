# vite-plugin-preload-deferred-styles

[![npm version](https://img.shields.io/npm/v/@budarin/vite-plugin-preload-deferred-styles.svg)](https://www.npmjs.com/package/@budarin/vite-plugin-preload-deferred-styles)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Vite –ø–ª–∞–≥–∏–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç–∏–ª—è–º–∏. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ build —Ä–µ–∂–∏–º–µ.

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–≥–¥–∞ HTML —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞:

**–õ—é–±—ã–µ —Å—Ç–∏–ª–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö CSS —Ñ–∞–π–ª–æ–≤!

–û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è **SPA** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JavaScript!

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ –ø–ª–∞–≥–∏–Ω–∞:

```html
<head>
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto"
    />
    <link rel="stylesheet" href="/bootstrap.css" />
    <link rel="stylesheet" href="/main.css" />
</head>
<body>
    <h1>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
    <!-- –ù–ï –í–ò–î–ù–ê –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π! -->
</body>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω** –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π!

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∫–æ–¥:

### –î–æ:

```html
<head>
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto"
    />
    <link rel="stylesheet" href="/main.css" />
</head>
<body>
    <h1>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
    <!-- –ù–ï –í–ò–î–ù–ê -->
</body>
```

### –ü–æ—Å–ª–µ:

```html
<head>
    <!-- Preload —Ç–µ–≥ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Å—Ç–∏–ª–µ–º -->
    <link
        rel="preload"
        href="https://fonts.googleapis.com/css2?family=Roboto"
        as="style"
        onload="this.onload=null;this.rel='stylesheet'"
    />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto"
        media="print"
        onload="this.media='all'"
    />

    <link
        rel="preload"
        href="/main.css"
        as="style"
        onload="this.onload=null;this.rel='stylesheet'"
    />
    <link
        rel="stylesheet"
        href="/main.css"
        media="print"
        onload="this.media='all'"
    />
</head>
<body>
    <h1>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
    <!-- –í–ò–î–ù–ê –°–†–ê–ó–£! -->
</body>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**, —Å—Ç–∏–ª–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ!

## üéØ –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–ª–∞–≥–∏–Ω

- **SPA (Single Page Application)** - –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JavaScript
- **Landing —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –≤–∞–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω —Å—Ä–∞–∑—É
- **–ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Å–∞–π—Ç—ã** - —Å—Ç–∞—Ç—å–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- **E-commerce** - —Ç–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- **–ë–ª–æ–≥–∏** - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —Å—Ä–∞–∑—É

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @budarin/vite-plugin-preload-deferred-styles
```

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import { preloadDeferredStyles } from '@budarin/vite-plugin-preload-deferred-styles';

export default defineConfig({
    plugins: [preloadDeferredStyles()],
});
```

## ‚öôÔ∏è –û–ø—Ü–∏–∏

| –û–ø—Ü–∏—è   | –¢–∏–ø       | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ                 |
| ------- | --------- | ------------ | ------------------------ |
| `debug` | `boolean` | `false`      | –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ |

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Å—Ç–∏–ª–∏** (–∫—Ä–æ–º–µ –∏–Ω–ª–∞–π–Ω `#`)
2. **–°–æ–∑–¥–∞–µ—Ç preload —Ç–µ–≥–∏** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
3. **–î–æ–±–∞–≤–ª—è–µ—Ç `media="print" onload="this.media='all'"`** –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º —Å—Ç–∏–ª—è–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, —Å—Ç–∏–ª–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ.

## üö´ –ò—Å–∫–ª—é—á–µ–Ω–∏—è

- –ò–Ω–ª–∞–π–Ω —Å—Ç–∏–ª–∏ (`<style>...</style>` –∏ `href="#inline-styles"`)

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π:

```html
<!-- –ò—Å–∫–ª—é—á–∞–µ—Ç—Å—è - —Ç–µ–≥ style -->
<style>
    body {
        margin: 0;
    }
</style>

<!-- –ò—Å–∫–ª—é—á–∞–µ—Ç—Å—è - —è–∫–æ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞ -->
<link rel="stylesheet" href="#inline-styles" />
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Vite >= 5.0.0
- Node.js >= 16.0.0

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
