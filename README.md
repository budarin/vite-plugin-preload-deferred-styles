# vite-plugin-preload-deferred-styles

[![npm version](https://img.shields.io/npm/v/@budarin/vite-plugin-preload-deferred-styles.svg)](https://www.npmjs.com/package/@budarin/vite-plugin-preload-deferred-styles)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Vite –ø–ª–∞–≥–∏–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç–∏–ª—è–º–∏. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ build —Ä–µ–∂–∏–º–µ.

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∞—Å—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –≤–∞–∂–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ **–º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö CSS —Ñ–∞–π–ª–æ–≤, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ –ø–ª–∞–≥–∏–Ω–∞:

```html
<head>
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto"
    />
    <link rel="stylesheet" href="/bootstrap.css" />
    <link rel="stylesheet" href="/main.css" />
</head>
<body>
    <h1>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
    <!-- –ù–ï –í–ò–î–ù–ê –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π! -->
</body>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç **–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω** –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:

- **SPA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** - –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –≤–∏–¥–µ–Ω –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JavaScript
- **Landing —Å—Ç—Ä–∞–Ω–∏—Ü** - –ø–æ—Ç–µ—Ä—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–ù–æ–≤–æ—Å—Ç–Ω—ã—Ö —Å–∞–π—Ç–æ–≤** - —á–∏—Ç–∞—Ç–µ–ª–∏ —É—Ö–æ–¥—è—Ç —Å —Å–∞–π—Ç–∞
- **E-commerce** - —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∏–ª–µ–π, –ø–æ–∑–≤–æ–ª—è—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ:

### –î–æ:

```html
<head>
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto"
    />
    <link rel="stylesheet" href="/main.css" />
</head>
<body>
    <h1>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
    <!-- –ù–ï –í–ò–î–ù–ê -->
</body>
```

### –ü–æ—Å–ª–µ:

```html
<head>
    <!-- Preload —Ç–µ–≥ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Å—Ç–∏–ª–µ–º -->
    <link
        rel="preload"
        href="https://fonts.googleapis.com/css2?family=Roboto"
        as="style"
        onload="this.onload=null;this.rel='stylesheet'"
    />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto"
        media="print"
        onload="this.media='all'"
    />

    <link
        rel="preload"
        href="/main.css"
        as="style"
        onload="this.onload=null;this.rel='stylesheet'"
    />
    <link
        rel="stylesheet"
        href="/main.css"
        media="print"
        onload="this.media='all'"
    />
</head>
<body>
    <h1>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
    <!-- –í–ò–î–ù–ê –°–†–ê–ó–£! -->
</body>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –∫–æ–Ω—Ç–µ–Ω—Ç **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**, –∞ —Å—Ç–∏–ª–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç!

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü–ª–∞–≥–∏–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Ö–Ω–∏–∫—É –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π:

1. **–°–∫–∞–Ω–∏—Ä—É–µ—Ç HTML** –∏ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏ (–∏—Å–∫–ª—é—á–∞—è –∏–Ω–ª–∞–π–Ω)
2. **–°–æ–∑–¥–∞–µ—Ç preload —Ç–µ–≥–∏** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π
3. **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏** –¥–æ–±–∞–≤–ª—è—è `media="print" onload="this.media='all'"`

**–ü—Ä–∏–Ω—Ü–∏–ø:** –°—Ç–∏–ª–∏ —Å `media="print"` –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –Ω–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —ç–∫—Ä–∞–Ω—É.

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ü–ª–∞–≥–∏–Ω –ø–æ–ª–µ–∑–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Å—Ç–∏–ª–∏ –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤ HTML. –ï—Å–ª–∏ —Å—Ç–∏–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∏—Ö —Å–ª–µ–¥—É–µ—Ç –≤—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–ª–∞–π–Ω.

## üéØ –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–ª–∞–≥–∏–Ω

- **SPA (Single Page Application)** - –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JavaScript
- **Landing —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –≤–∞–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω —Å—Ä–∞–∑—É
- **–ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Å–∞–π—Ç—ã** - —Å—Ç–∞—Ç—å–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- **E-commerce** - —Ç–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- **–ë–ª–æ–≥–∏** - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —Å—Ä–∞–∑—É

## ‚ùå –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–ü–ª–∞–≥–∏–Ω **–ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç** –µ—Å–ª–∏:

- **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏** - —Å—Ç–∏–ª–∏ –Ω—É–∂–Ω—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ HTML
- **–°—Ç–∏–ª–∏ –¥–ª—è "above the fold"** - —Å—Ç–∏–ª–∏ –¥–ª—è –≤–∏–¥–∏–º–æ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏** - reset, normalize, –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–ª–∞–π–Ω –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω —Å—Ä–∞–∑—É

**–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–ª–∞–π–Ω —Å—Ç–∏–ª–∏ –∏–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS.

## üö´ –ò—Å–∫–ª—é—á–µ–Ω–∏—è

- –ò–Ω–ª–∞–π–Ω —Å—Ç–∏–ª–∏ (`<style>...</style>` –∏ `href="#inline-styles"`)

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π:

```html
<!-- –ò—Å–∫–ª—é—á–∞–µ—Ç—Å—è - —Ç–µ–≥ style -->
<style>
    body {
        margin: 0;
    }
</style>

<!-- –ò—Å–∫–ª—é—á–∞–µ—Ç—Å—è - —è–∫–æ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞ -->
<link rel="stylesheet" href="#inline-styles" />
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @budarin/vite-plugin-preload-deferred-styles
```

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import { preloadDeferredStyles } from '@budarin/vite-plugin-preload-deferred-styles';

export default defineConfig({
    plugins: [preloadDeferredStyles()],
});
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
